<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CycleFem - Suivi du cycle menstruel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="bi bi-heart-pulse text-primary me-2"></i>CycleFem
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-section="dashboard">
                            <i class="bi bi-house me-1"></i>Accueil
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="calendar">
                            <i class="bi bi-calendar3 me-1"></i>Calendrier
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="predictions">
                            <i class="bi bi-graph-up me-1"></i>Prédictions
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="history">
                            <i class="bi bi-clock-history me-1"></i>Historique
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="statistics">
                            <i class="bi bi-bar-chart me-1"></i>Statistiques
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle me-1"></i><span id="user-name">Utilisateur</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" data-section="profile">
                                <i class="bi bi-gear me-2"></i>Paramètres
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logout">
                                <i class="bi bi-box-arrow-right me-2"></i>Déconnexion
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-5 pt-4">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section">
            <div class="row">
                <div class="col-12 mb-4">
                    <div class="welcome-card">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h1 class="h2 mb-3">Bonjour <span id="welcome-name">!</span></h1>
                                <p class="lead mb-0">Suivez votre cycle menstruel et prenez soin de votre santé reproductive.</p>
                            </div>
                            <div class="col-md-4 text-center">
                                <img src="https://pixabay.com/get/g994f47360f9cfd7151f56554dfacc3406b3629e3e05842e60a35d6c2be1bc3fb5ee861062e9cd12b23b40086f5a645d670874f812d74fa08d4290956f470d951_1280.jpg" 
                                     alt="Calendrier santé féminine" class="img-fluid rounded" style="max-height: 200px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Quick Actions -->
                <div class="col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-plus-circle me-2"></i>Actions rapides</h5>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" id="add-period-btn">
                                    <i class="bi bi-calendar-plus me-2"></i>Ajouter règles
                                </button>
                                <button class="btn btn-secondary" id="add-activity-btn">
                                    <i class="bi bi-heart me-2"></i>Enregistrer activité
                                </button>
                                <button class="btn btn-outline-primary" id="notifications-btn">
                                    <i class="bi bi-bell me-2"></i>Activer notifications
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Current Status -->
                <div class="col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-info-circle me-2"></i>Statut actuel</h5>
                            <div id="current-status">
                                <p class="text-muted">Chargement...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Next Events -->
                <div class="col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-calendar-event me-2"></i>Prochains événements</h5>
                            <div id="next-events">
                                <p class="text-muted">Chargement...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Section -->
        <div id="calendar-section" class="content-section d-none">
            <div class="row">
                <div class="col-12 mb-4">
                    <h2><i class="bi bi-calendar3 me-2"></i>Calendrier menstruel</h2>
                    <p class="text-muted">Visualisez votre cycle et ajoutez de nouvelles données.</p>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-8 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title mb-0">
                                    <span id="calendar-month-year"></span>
                                </h5>
                                <div>
                                    <button class="btn btn-outline-primary btn-sm me-2" id="prev-month">
                                        <i class="bi bi-chevron-left"></i>
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm" id="next-month">
                                        <i class="bi bi-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="calendar-grid"></div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-palette me-2"></i>Légende</h5>
                            <div class="legend">
                                <div class="legend-item">
                                    <span class="legend-color period"></span>
                                    <span>Règles</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color fertile"></span>
                                    <span>Période fertile</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color ovulation"></span>
                                    <span>Ovulation</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color activity"></span>
                                    <span>Activité sexuelle</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-plus-circle me-2"></i>Ajouter</h5>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addPeriodModal">
                                    Ajouter règles
                                </button>
                                <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#addActivityModal">
                                    Ajouter activité
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Predictions Section -->
        <div id="predictions-section" class="content-section d-none">
            <div class="row">
                <div class="col-12 mb-4">
                    <h2><i class="bi bi-graph-up me-2"></i>Prédictions</h2>
                    <p class="text-muted">Consultez les prévisions basées sur votre historique.</p>
                </div>
            </div>

            <div class="row" id="predictions-content">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>

        <!-- History Section -->
        <div id="history-section" class="content-section d-none">
            <div class="row">
                <div class="col-12 mb-4">
                    <h2><i class="bi bi-clock-history me-2"></i>Historique</h2>
                    <p class="text-muted">Consultez et modifiez vos données passées.</p>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-8 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Cycles précédents</h5>
                            <div id="cycles-history">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Activités récentes</h5>
                            <div id="activities-history">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Section -->
        <div id="statistics-section" class="content-section d-none">
            <div class="row">
                <div class="col-12 mb-4">
                    <h2><i class="bi bi-bar-chart me-2"></i>Statistiques</h2>
                    <p class="text-muted">Analysez vos données pour mieux comprendre votre cycle.</p>
                </div>
            </div>

            <div class="row" id="statistics-content">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profile-section" class="content-section d-none">
            <div class="row">
                <div class="col-12 mb-4">
                    <h2><i class="bi bi-gear me-2"></i>Paramètres du profil</h2>
                    <p class="text-muted">Personnalisez votre expérience.</p>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Informations personnelles</h5>
                            <form id="profile-form">
                                <div class="mb-3">
                                    <label for="profile-name" class="form-label">Nom</label>
                                    <input type="text" class="form-control" id="profile-name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="profile-email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="profile-email" readonly>
                                </div>
                                <div class="mb-3">
                                    <label for="cycle-length" class="form-label">Durée du cycle (jours)</label>
                                    <input type="number" class="form-control" id="cycle-length" min="21" max="35" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Sauvegarder</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Notifications</h5>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="notifications-enabled">
                                <label class="form-check-label" for="notifications-enabled">
                                    Activer les notifications
                                </label>
                            </div>
                            <p class="text-muted small">
                                Recevez des rappels pour vos règles, votre période fertile et d'autres événements importants.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Period Modal -->
    <div class="modal fade" id="addPeriodModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ajouter règles</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="add-period-form">
                        <div class="mb-3">
                            <label for="period-start" class="form-label">Date de début *</label>
                            <input type="date" class="form-control" id="period-start" required>
                        </div>
                        <div class="mb-3">
                            <label for="period-end" class="form-label">Date de fin</label>
                            <input type="date" class="form-control" id="period-end">
                        </div>
                        <div class="mb-3">
                            <label for="period-flow" class="form-label">Flux</label>
                            <select class="form-select" id="period-flow">
                                <option value="light">Léger</option>
                                <option value="medium" selected>Moyen</option>
                                <option value="heavy">Abondant</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="save-period">Sauvegarder</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Activity Modal -->
    <div class="modal fade" id="addActivityModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Enregistrer activité sexuelle</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="add-activity-form">
                        <div class="mb-3">
                            <label for="activity-date" class="form-label">Date *</label>
                            <input type="date" class="form-control" id="activity-date" required>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="activity-protection">
                                <label class="form-check-label" for="activity-protection">
                                    Protection utilisée
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" id="save-activity">Sauvegarder</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div class="modal fade" id="loadingModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="spinner-border text-primary mb-3" role="status">
                        <span class="visually-hidden">Chargement...</span>
                    </div>
                    <p class="mb-0">Chargement en cours...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/predictions.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
